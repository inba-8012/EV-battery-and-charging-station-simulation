<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EV Smart Charging Navigation System</title>
<style>
*{box-sizing:border-box;font-family:Segoe UI,sans-serif;}
body{
    margin:0;
    background:linear-gradient(135deg,#020617,#0f172a);
    color:#f8fafc;
}
header{
    padding:15px 30px;
    background:#020617;
    border-bottom:2px solid #22c55e;
    display:flex;
    justify-content:space-between;
    align-items:center;
}
header h1{color:#22c55e;font-size:20px;}
nav a{
    color:#e2e8f0;
    margin-left:18px;
    text-decoration:none;
    font-size:14px;
}
nav a:hover{color:#22c55e;}

.container{padding:22px;}
.grid{
    display:grid;
    grid-template-columns:1.2fr 2fr;
    gap:20px;
}
.card{
    background:#020617;
    border:1px solid #1e293b;
    border-radius:14px;
    padding:16px;
    box-shadow:0 10px 25px rgba(0,0,0,0.4);
}

.battery-box{text-align:center;}
.battery{
    width:100%;
    height:26px;
    background:#1e293b;
    border-radius:20px;
    overflow:hidden;
    margin-top:10px;
}
.battery-level{
    height:100%;
    width:100%;
    background:linear-gradient(90deg,#22c55e,#4ade80);
    transition:0.5s;
}
.alert{
    margin-top:6px;
    color:#facc15;
    font-size:14px;
    display:none;
}
.btn{
    margin-top:8px;
    padding:8px 14px;
    border:none;
    border-radius:8px;
    background:#22c55e;
    color:#022c22;
    font-weight:bold;
    cursor:pointer;
}
.btn:hover{background:#16a34a;}

.range-box,.status-box{
    margin-top:6px;
    font-size:14px;
    color:#38bdf8;
}

/* 3D MAP */
.map-container{
    margin-top:10px;
    perspective:900px;
}
.map-3d{
    width:100%;
    height:260px;
    background:linear-gradient(180deg,#020617,#020617 60%,#064e3b);
    border-radius:14px;
    border:1px solid #1e293b;
    position:relative;
    transform:rotateX(55deg);
    overflow:hidden;
}
.grid-lines{
    position:absolute;
    width:100%;
    height:100%;
    background-image:
      linear-gradient(#134e4a 1px, transparent 1px),
      linear-gradient(90deg,#134e4a 1px, transparent 1px);
    background-size:40px 40px;
    opacity:0.4;
}

/* Vehicle */
.vehicle{
    position:absolute;
    width:18px;
    height:18px;
    background:#22c55e;
    border-radius:50%;
    box-shadow:0 0 15px #22c55e;
    transform:translate(-50%,-50%);
}

/* Station */
.station-map{
    position:absolute;
    width:14px;
    height:14px;
    background:#38bdf8;
    border-radius:50%;
    transform:translate(-50%,-50%);
}
.station-fast{background:#facc15;}
.station-best{
    background:#ef4444;
    box-shadow:0 0 12px #ef4444;
}

.map-label{
    position:absolute;
    font-size:10px;
    color:#e2e8f0;
    transform:translate(-50%,-50%);
}

/* Route line */
.route-line{
    position:absolute;
    height:2px;
    background:#22c55e;
    transform-origin:0 50%;
    box-shadow:0 0 10px #22c55e;
}

.stations{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
    gap:10px;
}
.station{
    padding:10px;
    border-radius:10px;
    border:1px solid #1e293b;
    background:#020617;
}
.badge{
    display:inline-block;
    padding:4px 8px;
    font-size:11px;
    border-radius:6px;
    margin-bottom:5px;
    background:#22c55e;
    color:#022c22;
    font-weight:bold;
}
.ai-badge{
    background:#38bdf8;
    color:#082f49;
}
.reach.ok{color:#22c55e;font-size:12px;}
.reach.no{color:#ef4444;font-size:12px;}

footer{
    margin-top:25px;
    text-align:center;
    font-size:13px;
    color:#94a3b8;
}
</style>
</head>
<body>

<header>
    <h1>‚ö° EV Smart Charging Navigation System</h1>
    <nav>
        <a href="#">Dashboard</a>
        <a href="#">Simulation</a>
        <a href="#">Navigation</a>
        <a href="#">System</a>
    </nav>
</header>

<div class="container">
<div class="grid">

<!-- Battery Panel -->
<div class="card battery-box">
    <h2>transportation monitoring</h2>
    <h3 id="batteryText">100%</h3>
    <div class="range-box" id="rangeText">Remaining Range: -- km</div>
    <div class="status-box" id="statusText">Status: Idle</div>

    <div class="battery">
        <div class="battery-level" id="batteryBar"></div>
    </div>
    <div class="alert" id="alertBox">‚ö† Battery below 30%! Navigating to optimal charging station...</div>
    <button class="btn" onclick="startSimulation()">Start Simulation</button>

    <h3 style="margin-top:10px;">3D Vehicle Navigation Map</h3>
    <div class="map-container">
        <div class="map-3d" id="map3d">
            <div class="grid-lines"></div>
            <div class="vehicle" id="vehicle"></div>
        </div>
    </div>
</div>

<!-- Stations Panel -->
<div class="card">
    <h2>Available Charging Stations</h2>
    <div class="stations" id="stationList"></div>
</div>

</div>
</div>

<footer>
EV Intelligent Navigation Interface
</footer>

<script>
let battery = 100;
let timer;

// EV model
const maxRange = 320;
const efficiency = maxRange / 100;

// Vehicle position
let vehiclePos = {x:10, y:80};

// Charging stations with map coordinates
let stations = [
 {name:"GreenCharge Hub",distance:2.1,fast:true,slots:3,cost:120,x:30,y:40},
 {name:"VoltPoint Station",distance:1.4,fast:false,slots:1,cost:80,x:60,y:70},
 {name:"EcoPower Center",distance:3.5,fast:true,slots:5,cost:150,x:80,y:30},
 {name:"CityCharge Stop",distance:0.9,fast:false,slots:2,cost:60,x:20,y:20},
 {name:"HyperVolt Express",distance:2.8,fast:true,slots:4,cost:140,x:70,y:50}
];

function startSimulation(){
    if(timer) clearInterval(timer);
    battery = 100;
    vehiclePos = {x:10, y:80};
    updateBattery();
    drawMap();

    timer = setInterval(()=>{
        battery -= Math.floor(Math.random()*2)+1;
        if(battery<=0){
            battery=0;
            clearInterval(timer);
        }

        moveVehicleToBestStation();
        updateBattery();
        drawMap();
    },800);
}

function updateBattery(){
    const bar=document.getElementById("batteryBar");
    const text=document.getElementById("batteryText");
    const alert=document.getElementById("alertBox");
    const rangeText=document.getElementById("rangeText");

    text.innerText=battery+"%";
    bar.style.width=battery+"%";

    let remainingRange = Math.round(battery * efficiency);
    rangeText.innerText="Remaining Range: "+remainingRange+" km";

    if(battery>60){
        bar.style.background="linear-gradient(90deg,#22c55e,#4ade80)";
    }else if(battery>30){
        bar.style.background="linear-gradient(90deg,#facc15,#fde047)";
    }else{
        bar.style.background="linear-gradient(90deg,#ef4444,#f87171)";
        alert.style.display="block";
        renderStations(remainingRange);
    }
}

function aiScore(s, remainingRange){
    let score=0;
    score += (5 - s.distance)*2;
    score += s.fast ? 3 : 0;
    score += s.slots;
    score -= s.cost/50;
    score += (s.distance <= remainingRange)?5:-5;
    return score;
}

function getBestStation(remainingRange){
    let scored=stations.map(s=>({...s,score:aiScore(s,remainingRange)}));
    scored.sort((a,b)=>b.score-a.score);
    return scored[0];
}

function moveVehicleToBestStation(){
    let remainingRange = Math.round(battery * efficiency);
    let best = getBestStation(remainingRange);

    if(!best) return;

    vehiclePos.x += (best.x - vehiclePos.x) * 0.05;
    vehiclePos.y += (best.y - vehiclePos.y) * 0.05;

    let dist = Math.sqrt(Math.pow(best.x - vehiclePos.x,2)+Math.pow(best.y - vehiclePos.y,2));

    const status=document.getElementById("statusText");
    if(dist < 2){
        status.innerText="Status: Destination Reached";
    }else{
        status.innerText="Status: Navigating to Optimal Station";
    }
}

function renderStations(remainingRange){
    const list=document.getElementById("stationList");
    list.innerHTML="";

    let scored=stations.map(s=>({...s,score:aiScore(s,remainingRange)}));
    scored.sort((a,b)=>b.score-a.score);
    let best=scored[0];

    scored.forEach(s=>{
        let reachable = s.distance <= remainingRange;
        let div=document.createElement("div");
        div.className="station";

        let badge=(s===best)?'<div class="badge ai-badge">AI Recommended</div>':"";

        div.innerHTML=`
            ${badge}
            <h3>${s.name}</h3>
            <p>üìç Distance: ${s.distance} km</p>
            <p>‚ö° Type: ${s.fast?"Fast":"Normal"} Charging</p>
            <p>üîå Slots: ${s.slots}</p>
            <p>üí∞ Cost: ‚Çπ${s.cost}</p>
            <div class="reach ${reachable?"ok":"no"}">
                ${reachable?"Reachable":"Out of Range"}
            </div>
        `;
        list.appendChild(div);
    });
}

function drawRouteLine(map, from, to){
    let line=document.createElement("div");
    line.className="route-line";

    let dx = to.x - from.x;
    let dy = to.y - from.y;
    let length = Math.sqrt(dx*dx + dy*dy);
    let angle = Math.atan2(dy, dx) * 180 / Math.PI;

    line.style.width = length + "%";
    line.style.left = from.x + "%";
    line.style.top = from.y + "%";
    line.style.transform = `rotate(${angle}deg)`;

    map.appendChild(line);
}

function drawMap(){
    const map=document.getElementById("map3d");
    const vehicle=document.getElementById("vehicle");

    document.querySelectorAll(".station-map,.map-label,.route-line").forEach(e=>e.remove());

    vehicle.style.left = vehiclePos.x + "%";
    vehicle.style.top = vehiclePos.y + "%";

    let remainingRange = Math.round(battery * efficiency);
    let best = getBestStation(remainingRange);

    if(best){
        drawRouteLine(map, vehiclePos, best);
    }

    stations.forEach(s=>{
        let dot=document.createElement("div");
        dot.className="station-map";
        if(s.fast) dot.classList.add("station-fast");
        if(best && s.name===best.name) dot.classList.add("station-best");

        dot.style.left=s.x+"%";
        dot.style.top=s.y+"%";
        map.appendChild(dot);

        let label=document.createElement("div");
        label.className="map-label";
        label.style.left=s.x+"%";
        label.style.top=(s.y+4)+"%";
        label.innerText=s.name;
        map.appendChild(label);
    });
}
</script>

</body>
</html>
